<html>
<head>
  <script src="js/fdb-all.min.js"></script>
  <script type="text/javascript" src="js/jquery-1.12.2.min.js"></script>
  <script type="text/javascript" src="js/bootstrap.min.js"></script>
  <link href="css/bootstrap.css" rel="stylesheet">
  <script>
    var fdb = new ForerunnerDB();
    var db = fdb.db("db");
    var studentCollection = db.collection("students")
    var scoreCollection = db.collection("score")
    var load_count = 0;
    function after_load(){
      load_count = load_count + 1;
      if(load_count == 2){
        for(var i=0;i<studentCollection.find().length;i++){
          console.log("name:" + studentCollection.find()[i].name);
          console.log("age:" + studentCollection.find()[i].age);
          console.log("English_score:" + scoreCollection.find()[i].english);
          console.log("Chinese_score:" + scoreCollection.find()[i].chinese);
          console.log("Math_score:" + scoreCollection.find()[i].math);
          $("tbody").append("<tr><td>"+studentCollection.find()[i].name+"</td><td>"+studentCollection.find()[i].age+'</td><td class="btn btn-default">Detail</td><tr>')
        }
      }
    }

    studentCollection.load(after_load);
    scoreCollection.load(after_load);
    function student(name, age, id){
      this.name = name;
      this.age = age;
      this.id = id;
    }
    function score(id, english, chinese, math){
      this.id = id;
      this.english = english;
      this.chinese = chinese;
      this.math = math;
    }
    function save_student(){
      var student1 = new student("Fiona", 12, 1);
      var student2 = new student("Jack", 13, 2);
      studentCollection.insert(student1);
      studentCollection.insert(student2);
      studentCollection.save();
      
      var student1_score = new score(1, 70, 80, 90);
      var student2_score = new score(2, 80, 90, 70);
      scoreCollection.insert(student1_score);
      scoreCollection.insert(student2_score);
      scoreCollection.save();
    }  
  </script>
</head>
<body>
  <table class="table table-hover">
    <thead>
      <tr>
        <td>姓名</td>
        <td>年齡</td>
        <td></td>
      </tr>
    </thead>
    <tbody>
    </tbody>
  </table>
</body>
</html>
